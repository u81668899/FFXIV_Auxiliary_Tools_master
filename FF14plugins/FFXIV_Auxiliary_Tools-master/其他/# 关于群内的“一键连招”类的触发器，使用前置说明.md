# README

## 关于群内“一键连招”类的触发器，一些必备的前置条件

### **一句话说明**

打开你的鲶鱼精邮差，找到监听的端口号，用 [点击下载](https://share.weiyun.com/R0Eisy92) 进行配置。

---

### **很多段落来说明**

- 准备工作

  - 添加插件 [鲶鱼精邮差](https://github.com/Natsukage/PostNamazu)

    >一个用于拓展ACT与相关插件的功能的插件。可以接收Triggernometry高级触发器等插件传递过来的游戏文本指令，并投递至游戏内执行。  
    仅限于最终幻想14自己支持的、可以在游戏内由宏或由文本聊天栏中输入并执行的指令，不支持任何游戏本身不提供的文本指令。

  - Triggernometry

    >一个高级战斗跟踪器插件，旨在扩展其内置触发系统，提供各种不同的动作和配置选项。

- 简单了解“一键连招”原理，从而理解为什么要做这些准备事项。

  - 思路：如果我按了 `第一连击技能` ，那么帮我把技能栏替换为 `第二连击技能`

   1. 启动鲶鱼精邮差，设置端口并点击“启动”开始在 **你设置的端口** 监听。（建议从49152到65535选择）

   1. 在ACT的Triggernometry高级触发器中添加触发器，匹配玩家角色释放 `第一连击技能` 技能成功

   1. 动作类型选择为“通用JSON动作”，端点URL设置为 `http://127.0.0.1:1234（你设置的端口）/command` ，有效负载发送设置为你要执行的文本指令 `/hotbar set 第二连击技能 1 1`

   1. 略

   现在小明做好了他的一键武士触发器，并且他自己使用的是1001端口。可以正常使用触发器进行自动替换技能，进行一键连招。  
   >小明触发器的目标 URL：`http://127.0.0.1:1001/command`

   于是，小明把他的作品分享给其他人使用，并且大家都按照他的使用说明将端口设置为了1001。  
   一段时间过去了，小红做了一个一键骑士用了10583端口
   >小红触发器的目标 URL：`http://127.0.0.1:10583/command`

   大雄做了一个一键翻花绳用了8501端口
   >大雄触发器的目标 URL：`http://127.0.0.1:8501/command`

   导致大家每次用对应职业都要修改一次监听端口，或者需要先去手动修改触发器内部的内容（可能需要你先去理解作者的实现逻辑），才可以使用。时不时还会出现某某某某端口号被其他应用程序占用，无法监听的情况。  

   秦始皇听说这个情况，从棺材板里跳了出来，说：“我们要书同文，车同轨，统一货币、度量衡。”  

   小明小红大雄都十分同意，他们不再将触发器的地址使用某个数字。而是使用Triggernometry的特殊变量来访问同一个的地址的值。  
   `_env[PostNamazu]=检索指定环境变量"PostNamazu"的值`  
   >现在，每个人都是：`http://127.0.0.1:${_env[PostNamazu]}/command`

   那么现在只要设置这个环境变量名为"PostNamazu"的值，即可统一配置所有类似触发器的监听端口，完成了书同文。  

   设置环境变量的方法：

  - 使用我制作好的批处理文件。（通过写入注册表实现）[点击下载](https://share.weiyun.com/R0Eisy92)

  - 也可自行百度如何添加环境变量，效果是一样的。

结束
